{"version":3,"sources":["app/DirectRpcHandlerAddOnBase.ts"],"names":[],"mappings":";AAAA,mDAAmD;;;;;;;;;;;;;;AAEnD,yEAA2F;AAE3F,+DAA4E;AAK5E;;GAEG;AAEH,IAAsB,yBAAyB,GAA/C;IAEC,YACwB,eAAuC,EACvC,WAA8B;QAD9B,oBAAe,GAAf,eAAe,CAAwB;QACvC,gBAAW,GAAX,WAAW,CAAmB;QAErD,4BAAK,CAAC,gBAAgB,CAAC,iBAAiB,EAAE,eAAe,CAAC,CAAC;QAC3D,4BAAK,CAAC,gBAAgB,CAAC,aAAa,EAAE,WAAW,CAAC,CAAC;IACpD,CAAC;IAED;;OAEG;IACI,IAAI,CAAC,aAAqB,IAAI;QACpC,IAAI,CAAC,WAAW,CAAC,MAAM,GAAG,UAAU,CAAC;QACrC,IAAI,CAAC,WAAW,CAAC,IAAI,GAAG,IAAI,CAAC,eAAe,CAAC,GAAG,CAAC,0CAAI,CAAC,YAAY,CAAC,CAAC;QACpE,IAAI,CAAC,WAAW,CAAC,IAAI,GAAG,IAAI,CAAC,eAAe,CAAC,GAAG,CAAC,0CAAI,CAAC,gBAAgB,CAAC,CAAC;QACxE,IAAI,CAAC,WAAW,CAAC,IAAI,EAAE,CAAC;QACxB,IAAI,CAAC,cAAc,EAAE,CAAC;QACtB,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC,KAAK,EAAE,CAAC;IACjC,CAAC;IAED;;OAEG;IACI,UAAU;QAChB,MAAM,CAAC,OAAO,CAAC,OAAO,EAAE,CAAC;IAC1B,CAAC;IAED;;OAEG;IACI,OAAO;QACb,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC;QAC5B,IAAI,OAAO,GAAG,IAAI,CAAC,WAAW,CAAC;QAC/B,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;QACxB,MAAM,CAAC,OAAO,CAAC,OAAO,EAAE,CAAC;IAC1B,CAAC;IAGS,cAAc;IACxB,CAAC;CACD,CAAA;AA1CqB,yBAAyB;IAD9C,iCAAU,EAAE;IAIV,WAAA,gCAAS,EAAE,CAAA;IACX,WAAA,gCAAS,EAAE,CAAA;;GAJQ,yBAAyB,CA0C9C;AA1CqB,8DAAyB","file":"DirectRpcHandlerAddOnBase.js","sourcesContent":["/// <reference types=\"back-lib-common-constants\" />\r\n\r\nimport { RpcSettingKeys as RpcS, SvcSettingKeys as SvcS } from 'back-lib-common-constants';\r\nimport { IConfigurationProvider } from 'back-lib-common-contracts';\r\nimport { inject, injectable, unmanaged, Guard } from 'back-lib-common-util';\r\n\r\nimport { IDirectRpcHandler } from './DirectRpcHandler';\r\n\r\n\r\n/**\r\n * Base class for DirectRpcAddOn.\r\n */\r\n@injectable()\r\nexport abstract class DirectRpcHandlerAddOnBase implements IServiceAddOn {\r\n\r\n\tconstructor(\r\n\t\t@unmanaged() protected _configProvider: IConfigurationProvider,\r\n\t\t@unmanaged() protected _rpcHandler: IDirectRpcHandler\r\n\t) {\r\n\t\tGuard.assertArgDefined('_configProvider', _configProvider);\r\n\t\tGuard.assertArgDefined('_rpcHandler', _rpcHandler);\r\n\t}\r\n\r\n\t/**\r\n\t * @see IServiceAddOn.init\r\n\t */\r\n\tpublic init(moduleName: string = null): Promise<void> {\r\n\t\tthis._rpcHandler.module = moduleName;\r\n\t\tthis._rpcHandler.name = this._configProvider.get(SvcS.SERVICE_SLUG);\r\n\t\tthis._rpcHandler.port = this._configProvider.get(RpcS.RPC_HANDLER_PORT);\r\n\t\tthis._rpcHandler.init();\r\n\t\tthis.handleRequests();\r\n\t\treturn this._rpcHandler.start();\r\n\t}\r\n\r\n\t/**\r\n\t * @see IServiceAddOn.deadLetter\r\n\t */\r\n\tpublic deadLetter(): Promise<void> {\r\n\t\treturn Promise.resolve();\r\n\t}\r\n\r\n\t/**\r\n\t * @see IServiceAddOn.dispose\r\n\t */\r\n\tpublic dispose(): Promise<void> {\r\n\t\tthis._configProvider = null;\r\n\t\tlet handler = this._rpcHandler;\r\n\t\tthis._rpcHandler = null;\r\n\t\treturn handler.dispose();\r\n\t}\r\n\r\n\r\n\tprotected handleRequests(): void {\r\n\t}\r\n}"]}